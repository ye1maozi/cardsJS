<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸æˆç»“æŸåŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .test-result.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .test-result.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .test-button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background-color: #0056b3;
        }
        .test-button.danger {
            background-color: #dc3545;
        }
        .test-button.danger:hover {
            background-color: #c82333;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ® æ¸¸æˆç»“æŸåŠŸèƒ½æµ‹è¯•</h1>
        <p>æµ‹è¯•ç”Ÿå‘½å€¼ä¸º0æ—¶æ¸¸æˆæ˜¯å¦æ­£ç¡®ç»“æŸã€‚</p>

        <button class="test-button" onclick="testGameEndLogic()">æµ‹è¯•æ¸¸æˆç»“æŸé€»è¾‘</button>
        <button class="test-button" onclick="testLifeZero()">æµ‹è¯•ç”Ÿå‘½å€¼ä¸º0</button>
        <button class="test-button danger" onclick="forceGameEnd()">å¼ºåˆ¶ç»“æŸæ¸¸æˆ</button>

        <div id="test-results"></div>
    </div>

    <iframe src="../index.html" style="width: 100%; height: 600px; border: 2px solid #007bff; border-radius: 10px; margin-top: 20px;"></iframe>

    <script>
        function addTestResult(message, type = 'success') {
            const container = document.getElementById('test-results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${type}`;
            resultDiv.textContent = message;
            container.appendChild(resultDiv);
        }

        function testGameEndLogic() {
            document.getElementById('test-results').innerHTML = '';
            
            // æ¨¡æ‹Ÿæ¸¸æˆçŠ¶æ€
            const mockGameState = {
                playerHealth: 30,
                computerHealth: 30,
                playerCharacter: { currentHealth: 30 },
                computerCharacter: { currentHealth: 30 },
                gameOver: false,
                winner: null,
                
                checkGameEnd() {
                    if (this.playerHealth <= 0 || this.playerCharacter.currentHealth <= 0) {
                        this.gameOver = true;
                        this.winner = "ç”µè„‘";
                        return { isOver: true, winner: "ç”µè„‘", message: "ç”µè„‘è·èƒœï¼" };
                    }
                    
                    if (this.computerHealth <= 0 || this.computerCharacter.currentHealth <= 0) {
                        this.gameOver = true;
                        this.winner = "ç©å®¶";
                        return { isOver: true, winner: "ç©å®¶", message: "ç©å®¶è·èƒœï¼" };
                    }

                    return { isOver: false };
                }
            };

            // æµ‹è¯•æ­£å¸¸æƒ…å†µ
            let result = mockGameState.checkGameEnd();
            if (!result.isOver) {
                addTestResult('âœ… æ­£å¸¸æƒ…å†µï¼šæ¸¸æˆæœªç»“æŸ');
            } else {
                addTestResult('âŒ æ­£å¸¸æƒ…å†µï¼šæ¸¸æˆæ„å¤–ç»“æŸ', 'error');
            }

            // æµ‹è¯•ç©å®¶ç”Ÿå‘½å€¼ä¸º0
            mockGameState.playerHealth = 0;
            result = mockGameState.checkGameEnd();
            if (result.isOver && result.winner === "ç”µè„‘") {
                addTestResult('âœ… ç©å®¶ç”Ÿå‘½å€¼ä¸º0ï¼šæ¸¸æˆæ­£ç¡®ç»“æŸï¼Œç”µè„‘è·èƒœ');
            } else {
                addTestResult('âŒ ç©å®¶ç”Ÿå‘½å€¼ä¸º0ï¼šæ¸¸æˆç»“æŸé€»è¾‘é”™è¯¯', 'error');
            }

            // é‡ç½®å¹¶æµ‹è¯•ç”µè„‘ç”Ÿå‘½å€¼ä¸º0
            mockGameState.playerHealth = 30;
            mockGameState.computerHealth = 0;
            result = mockGameState.checkGameEnd();
            if (result.isOver && result.winner === "ç©å®¶") {
                addTestResult('âœ… ç”µè„‘ç”Ÿå‘½å€¼ä¸º0ï¼šæ¸¸æˆæ­£ç¡®ç»“æŸï¼Œç©å®¶è·èƒœ');
            } else {
                addTestResult('âŒ ç”µè„‘ç”Ÿå‘½å€¼ä¸º0ï¼šæ¸¸æˆç»“æŸé€»è¾‘é”™è¯¯', 'error');
            }

            // æµ‹è¯•è§’è‰²ç”Ÿå‘½å€¼
            mockGameState.computerHealth = 30;
            mockGameState.playerCharacter.currentHealth = 0;
            result = mockGameState.checkGameEnd();
            if (result.isOver && result.winner === "ç”µè„‘") {
                addTestResult('âœ… ç©å®¶è§’è‰²ç”Ÿå‘½å€¼ä¸º0ï¼šæ¸¸æˆæ­£ç¡®ç»“æŸ');
            } else {
                addTestResult('âŒ ç©å®¶è§’è‰²ç”Ÿå‘½å€¼ä¸º0ï¼šæ¸¸æˆç»“æŸé€»è¾‘é”™è¯¯', 'error');
            }
        }

        function testLifeZero() {
            document.getElementById('test-results').innerHTML = '';
            addTestResult('ğŸ® è¯·åœ¨ä¸‹æ–¹æ¸¸æˆç•Œé¢ä¸­æµ‹è¯•ï¼š');
            addTestResult('1. ä½¿ç”¨é«˜ä¼¤å®³å¡ç‰Œå°†å¯¹æ‰‹ç”Ÿå‘½å€¼é™åˆ°0');
            addTestResult('2. è§‚å¯Ÿæ˜¯å¦å‡ºç°æ¸¸æˆç»“æŸå¼¹çª—');
            addTestResult('3. æ£€æŸ¥æ¸¸æˆæ˜¯å¦åœæ­¢è¿è¡Œ');
        }

        function forceGameEnd() {
            document.getElementById('test-results').innerHTML = '';
            addTestResult('âš ï¸ å¼ºåˆ¶ç»“æŸæ¸¸æˆæµ‹è¯•ï¼š');
            addTestResult('1. åœ¨æ¸¸æˆç•Œé¢ä¸­å¿«é€Ÿç‚¹å‡»é«˜ä¼¤å®³å¡ç‰Œ');
            addTestResult('2. è§‚å¯Ÿç”Ÿå‘½å€¼å˜åŒ–å’Œæ¸¸æˆç»“æŸé€»è¾‘');
            addTestResult('3. ç¡®è®¤æ¸¸æˆç»“æŸå¼¹çª—æ­£ç¡®æ˜¾ç¤º');
        }
    </script>
</body>
</html> 