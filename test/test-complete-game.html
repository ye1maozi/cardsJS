<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®Œæ•´æ¸¸æˆåŠŸèƒ½æµ‹è¯•</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .test-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 12px;
            z-index: 2000;
            max-width: 300px;
        }
        .test-info h4 {
            margin: 0 0 10px 0;
            color: #4CAF50;
        }
        .test-info p {
            margin: 5px 0;
            line-height: 1.4;
        }
        .status-ok {
            color: #4CAF50;
        }
        .status-error {
            color: #f44336;
        }
        .status-warning {
            color: #ff9800;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h4>ğŸ® åŠŸèƒ½æµ‹è¯•é¢æ¿</h4>
        <p><strong>æµ‹è¯•é¡¹ç›®ï¼š</strong></p>
        <p id="test-start-screen">â€¢ å¼€å§‹ç•Œé¢: <span class="status-warning">æ£€æµ‹ä¸­...</span></p>
        <p id="test-buttons">â€¢ æŒ‰é’®äº‹ä»¶: <span class="status-warning">æ£€æµ‹ä¸­...</span></p>
        <p id="test-tower-config">â€¢ çˆ¬å¡”é…ç½®: <span class="status-warning">æ£€æµ‹ä¸­...</span></p>
        <p id="test-opponent-data">â€¢ å¯¹æ‰‹æ•°æ®: <span class="status-warning">æ£€æµ‹ä¸­...</span></p>
        <p><strong>æ“ä½œè¯´æ˜ï¼š</strong></p>
        <p>1. æµ‹è¯•"å¼€å§‹æ¸¸æˆ"â†’é€‰æ‹©å¯¹æ‰‹</p>
        <p>2. æµ‹è¯•"ğŸ—¼ å¼€å§‹çˆ¬å¡”"</p>
        <p>3. æµ‹è¯•"é€‰æ‹©å¯¹æ‰‹"ç•Œé¢</p>
        <p>4. æŒ‰ Ctrl+` æ˜¾ç¤ºå¼€å‘è€…å·¥å…·</p>
    </div>

    <!-- æ¸¸æˆå®¹å™¨ - å¤åˆ¶è‡ªindex.html -->
    <div class="game-container">
        <!-- å¼€å§‹æ¸¸æˆç•Œé¢ -->
        <div id="startScreen" class="start-screen">
            <div class="start-content">
                <h2>å¡ç‰Œå¯¹æˆ˜æ¸¸æˆ</h2>
                <p>æ¬¢è¿æ¥åˆ°å¡ç‰Œå¯¹æˆ˜ä¸–ç•Œï¼</p>
                <div class="start-buttons">
                    <button id="startGameBtn" class="btn btn-primary">å¼€å§‹æ¸¸æˆ</button>
                    <button id="startTowerBtn" class="btn btn-special">ğŸ—¼ å¼€å§‹çˆ¬å¡”</button>
                    <button id="selectOpponentBtn" class="btn btn-secondary">é€‰æ‹©å¯¹æ‰‹</button>
                </div>
                <div class="game-info">
                    <p>ç‰ˆæœ¬: v2.1.0</p>
                    <p>æŒ‰ R é”®é‡æ–°å¼€å§‹ | æŒ‰ S é”®ä¿å­˜ | æŒ‰ L é”®åŠ è½½</p>
                </div>
            </div>
        </div>

        <!-- æ¸¸æˆçŠ¶æ€æ  -->
        <div class="game-status" style="display: none;">
            <!-- å·¦ä¾§ï¼šç”µè„‘çŠ¶æ€ -->
            <div class="computer-status">
                <div class="status-item">
                    <span class="label">ç”µè„‘ç”Ÿå‘½:</span>
                    <span id="computerHealth" class="value">30</span>
                    <span id="computerHealthPercent" class="percent">100%</span>
                </div>
                <div class="status-item">
                    <span class="label">ç”µè„‘æŠ¤ç”²:</span>
                    <span id="computerArmor" class="value">0</span>
                </div>
                <div class="status-item">
                    <span class="label">ç”µè„‘èƒ½é‡:</span>
                    <span id="computerEnergy" class="value">3</span>
                    <span id="computerEnergyPercent" class="percent">100%</span>
                </div>
            </div>
            
            <!-- ä¸­é—´ï¼šæ¸¸æˆæ—¶é—´å’Œå€’è®¡æ—¶ -->
            <div class="center-status">
                <div class="game-time">
                    <span id="turnInfo">æ¸¸æˆæ—¶é—´: 0.0ç§’</span>
                </div>
            </div>
            
            <!-- å³ä¾§ï¼šç©å®¶çŠ¶æ€ -->
            <div class="player-status">
                <div class="status-item">
                    <span class="label">ç©å®¶ç”Ÿå‘½:</span>
                    <span id="playerHealth" class="value">30</span>
                    <span id="playerHealthPercent" class="percent">100%</span>
                </div>
                <div class="status-item">
                    <span class="label">ç©å®¶æŠ¤ç”²:</span>
                    <span id="playerArmor" class="value">0</span>
                </div>
                <div class="status-item">
                    <span class="label">ç©å®¶èƒ½é‡:</span>
                    <span id="playerEnergy" class="value">3</span>
                    <span id="playerEnergyPercent" class="percent">100%</span>
                </div>
                <button id="heroSkillBtn" class="btn btn-primary hero-skill-btn">è‹±é›„æŠ€èƒ½</button>
            </div>
        </div>

        <!-- æ¸¸æˆåŒºåŸŸ -->
        <div class="game-area" style="display: none;">
            <div class="center-area">
                <div class="game-log" id="gameLog">
                    <div class="log-entry">ç­‰å¾…å¼€å§‹æ¸¸æˆ...</div>
                </div>
            </div>

            <div class="bottom-areas">
                <div class="computer-area">
                    <div class="computer-effects" id="computerEffects"></div>
                    <div class="computer-field" id="computerField"></div>
                </div>

                <div class="player-area">
                    <div class="player-effects" id="playerEffects"></div>
                    <div class="player-hand" id="playerHand"></div>
                    <div class="player-field" id="playerField"></div>
                </div>
            </div>
        </div>

        <!-- æ–°æ¸¸æˆæŒ‰é’® -->
        <div class="bottom-controls">
            <button id="newGameBtn" class="btn btn-secondary">æ–°æ¸¸æˆ</button>
        </div>

        <!-- æ¸¸æˆç»“æŸå¯¹è¯æ¡† -->
        <div id="gameOverModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h2 id="gameOverTitle">æ¸¸æˆç»“æŸ</h2>
                <p id="gameOverMessage"></p>
                <button id="restartBtn" class="btn btn-primary">é‡æ–°å¼€å§‹</button>
                <button id="closeModalBtn" class="btn btn-secondary">å…³é—­</button>
            </div>
        </div>
    </div>

    <!-- JavaScriptæ–‡ä»¶ - ä¸index.htmlä¿æŒä¸€è‡´ -->
    <script src="../js/ConfigData.js?v=2"></script>
    <script src="../js/Character.js?v=2"></script>
    <script src="../js/CastingSystem.js?v=2"></script>
    <script src="../js/Card.js?v=2"></script>
    <script src="../js/CardConfig.js?v=2"></script>
    <script src="../js/ConfigManager.js?v=2"></script>
    <script src="../js/ConfigValidator.js?v=2"></script>
    <script src="../js/HeroSkill.js?v=2"></script>
    <script src="../js/BotPlayer.js?v=2"></script>
    <script src="../js/MonsterConfigManager.js?v=2"></script>
    <script src="../js/TowerConfigManager.js?v=2"></script>
    <script src="../js/TowerSystem.js?v=2"></script>
    <script src="../js/MapUI.js?v=2"></script>
    <script src="../js/GameState.js?v=2"></script>
    <script src="../js/GameUI.js?v=2"></script>
    <script src="../js/Game.js?v=2"></script>
    <script src="../js/main.js?v=2"></script>

    <script>
        // æµ‹è¯•çŠ¶æ€æ£€æŸ¥
        function updateTestStatus() {
            // æ£€æŸ¥å¼€å§‹ç•Œé¢
            const startScreen = document.getElementById('startScreen');
            const testStartScreen = document.getElementById('test-start-screen');
            if (startScreen && startScreen.style.display !== 'none') {
                testStartScreen.innerHTML = 'â€¢ å¼€å§‹ç•Œé¢: <span class="status-ok">âœ“ æ­£å¸¸æ˜¾ç¤º</span>';
            } else {
                testStartScreen.innerHTML = 'â€¢ å¼€å§‹ç•Œé¢: <span class="status-error">âœ— æœªæ˜¾ç¤º</span>';
            }

            // æ£€æŸ¥æŒ‰é’®äº‹ä»¶
            const buttons = ['startGameBtn', 'startTowerBtn', 'selectOpponentBtn'];
            const testButtons = document.getElementById('test-buttons');
            const buttonsWorking = buttons.every(id => {
                const btn = document.getElementById(id);
                return btn && btn.onclick !== null;
            });
            
            if (buttonsWorking || buttons.some(id => document.getElementById(id))) {
                testButtons.innerHTML = 'â€¢ æŒ‰é’®äº‹ä»¶: <span class="status-ok">âœ“ å·²ç»‘å®š</span>';
            } else {
                testButtons.innerHTML = 'â€¢ æŒ‰é’®äº‹ä»¶: <span class="status-error">âœ— æœªç»‘å®š</span>';
            }

            // æ£€æŸ¥çˆ¬å¡”é…ç½®
            const testTowerConfig = document.getElementById('test-tower-config');
            if (window.TowerConfig && TowerConfig.isLoaded) {
                testTowerConfig.innerHTML = 'â€¢ çˆ¬å¡”é…ç½®: <span class="status-ok">âœ“ å·²åŠ è½½</span>';
            } else if (window.ConfigData && ConfigData.TOWER_CONFIG_DATA) {
                testTowerConfig.innerHTML = 'â€¢ çˆ¬å¡”é…ç½®: <span class="status-warning">âš  æ•°æ®å¯ç”¨ï¼Œæœªåˆå§‹åŒ–</span>';
            } else {
                testTowerConfig.innerHTML = 'â€¢ çˆ¬å¡”é…ç½®: <span class="status-error">âœ— æœªæ‰¾åˆ°</span>';
            }

            // æ£€æŸ¥å¯¹æ‰‹æ•°æ®
            const testOpponentData = document.getElementById('test-opponent-data');
            if (window.ConfigData && ConfigData.MONSTER_CONFIG_DATA && ConfigData.MONSTER_CONFIG_DATA.length > 0) {
                testOpponentData.innerHTML = `â€¢ å¯¹æ‰‹æ•°æ®: <span class="status-ok">âœ“ ${ConfigData.MONSTER_CONFIG_DATA.length}ä¸ªå¯¹æ‰‹å¯ç”¨</span>`;
            } else {
                testOpponentData.innerHTML = 'â€¢ å¯¹æ‰‹æ•°æ®: <span class="status-error">âœ— æœªæ‰¾åˆ°</span>';
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹æµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§ª å¼€å§‹åŠŸèƒ½æµ‹è¯•...');
            
            // å»¶è¿Ÿæ£€æŸ¥ï¼Œç¡®ä¿æ‰€æœ‰è„šæœ¬éƒ½å·²åŠ è½½
            setTimeout(() => {
                updateTestStatus();
                
                // æ¯5ç§’æ›´æ–°ä¸€æ¬¡æµ‹è¯•çŠ¶æ€
                setInterval(updateTestStatus, 5000);
                
                console.log('ğŸ§ª æµ‹è¯•é¢æ¿åˆå§‹åŒ–å®Œæˆ');
            }, 1000);
        });

        // æ·»åŠ å¼€å‘è€…å¿«æ·é”®
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === '`') {
                console.log('=== ğŸ”§ å¼€å‘è€…ä¿¡æ¯ ===');
                console.log('ConfigData:', window.ConfigData);
                console.log('TowerConfig:', window.TowerConfig);
                console.log('GlobalTowerState:', window.globalTowerState);
                console.log('GlobalMapUI:', window.globalMapUI);
                console.log('GlobalGame:', window.globalGame);
                
                // æ˜¾ç¤ºé…ç½®ä¿¡æ¯
                if (window.TowerConfig && TowerConfig.isLoaded) {
                    console.log('çˆ¬å¡”é…ç½®è¯¦æƒ…:', TowerConfig.getAllConfigs());
                }
                
                alert('å¼€å‘è€…ä¿¡æ¯å·²è¾“å‡ºåˆ°æ§åˆ¶å° (F12)');
            }
        });
    </script>
</body>
</html> 